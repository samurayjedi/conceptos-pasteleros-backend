"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[251,194,838],{9970:(e,n,t)=>{function r(e){return e.replace(/\[([0-9]+)\]/g,".$1")}t.d(n,{H:()=>r}),t(5306)},7228:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b}),t(3948);var r=t(7294),a=t(3999),i=t(8129),o=t.n(i),l=t(9887),s=t(6688),c=t(3838),d=t(7645),u=t(7750),p=t(4659),h=t(8979),m=t(6914),g=t(8872),Z=t(8199),f=t(5944);function b(){const{t:e}=(0,l.$G)(),[n,t]=(0,Z.pN)(),{categoriesDialogOpen:i,setCategoriesDialogOpen:b}=(0,r.useContext)(g.CTX),v=(0,r.useRef)(null),C=(0,r.useCallback)((()=>{if(v.current){const e=new FormData(v.current);a.Nd.post(o()("categories.store"),e,{onSuccess:()=>b(!1)})}}),[]),y=(0,r.useCallback)((()=>b(!1)),[]);return(0,f.BX)(c.Z,{open:i,maxWidth:"md",sx:{backgroundColor:"transparent"},children:[(0,f.tZ)(d.Z,{children:e("Add new category")}),(0,f.tZ)(u.Z,{children:(0,f.tZ)(s.l0,{subscription:{submitting:!0,pristine:!0},onSubmit:()=>{},render:({submitting:r,handleSubmit:a})=>{const i=r;return(0,f.BX)("form",{ref:v,onSubmit:a,children:[(0,f.tZ)(s.gN,{name:"label",subscription:{value:!0},render:({input:r})=>(0,f.tZ)(p.Z,{...r,label:e("Label"),fullWidth:!0,sx:{mb:2},color:"secondary",variant:"standard",disabled:i,onChange:t(r.onChange),error:Boolean(n[r.name]),helperText:n[r.name]})}),(0,f.tZ)(s.gN,{name:"slug",subscription:{value:!0},render:({input:r})=>(0,f.tZ)(p.Z,{...r,label:e("Slug"),fullWidth:!0,sx:{mb:2},color:"secondary",variant:"standard",disabled:i,onChange:t(r.onChange),error:Boolean(n[r.name]),helperText:n[r.name]})})]})}})}),(0,f.BX)(h.Z,{children:[(0,f.tZ)(m.Z,{color:"error",onClick:y,children:e("Cancel")}),(0,f.tZ)(m.Z,{color:"secondary",onClick:C,children:e("Add")})]})]})}},2829:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var r=t(4316),a=(t(3948),t(7294)),i=t(6010),o=t(9887),l=t(5944);function s({initial:e}){const[n,t]=(0,a.useState)(null),[r,s]=(0,a.useState)(e),{t:d}=(0,o.$G)();return(0,l.tZ)(c,{ref:e=>{e!==n&&t(e)},label:d("Upload Photo"),height:n?n.offsetWidth:100,className:(0,i.Z)({selected:r&&""!==r}),image:r,children:(0,l.tZ)("input",{type:"file",id:"preparation-cover",name:"cover",accept:"application/pdf, image/png, image/gif, image/jpeg",onChange:e=>{const{files:n}=e.target;if(n){const e=n[0];if(e){const n=new FileReader;n.onloadend=()=>{s(n.result)},n.readAsDataURL(e)}}}})})}const c=(0,r.Z)("label",{target:"ekl6x6n0"})((({theme:e,label:n,height:t=100,image:r=""})=>({width:"100%",height:t,borderWidth:2,color:e.palette.grey[500],borderColor:e.palette.divider,borderStyle:"dotted",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"border-color .2s ease-in, color .2s ease-in",'& input[type="file"]':{display:"none"},":hover":{borderColor:e.palette.secondary.main,color:e.palette.secondary.main},":before":{display:"block",content:'"ðŸ“Ž"',fontSize:50},":after":{display:"block",content:`"${n}"`,fontSize:16,fontWeight:"bold"},"&.selected":{backgroundImage:`url('${r}')`,backgroundSize:"100% 100%",backgroundRepeat:"no-repeat","&:before, &:after":{display:"none"}}})),"")},1273:(e,n,t)=>{t.r(n),t.d(n,{default:()=>y}),t(3948);var r=t(7294),a=t(6486),i=t.n(a),o=t(9887),l=t(6688),s=t(3694),c=t(6926),d=t(4659),u=t(270),p=t(6867),h=t(8364),m=t(2280),g=t(8199),Z=t(9970),f=t(7373),b=t(5944);function v({mask:e,definitions:n,InputProps:t,...r}){const a=i().defaultTo(t,{}),o=i().defaultTo(a.inputProps,{});return(0,b.tZ)(d.Z,{...r,InputProps:{...a,inputComponent:C,inputProps:{...o,mask:e,definitions:n}}})}const C=r.forwardRef(((e,n)=>{const{onChange:t,...r}=e;return(0,b.tZ)(f.oc,{...r,inputRef:n,onAccept:n=>{t&&t({target:{name:e.name,value:n}})},overwrite:!0})}));function y({name:e,index:n,onDelete:t,...a}){const f=(0,r.useContext)(m.CTX_PREPARATION),{t:C}=(0,o.$G)(),y=(0,l.cI)(),[x,k]=(0,g.pN)();return(0,b.BX)(s.Z,{...a,children:[(0,b.tZ)(c.Z,{children:(0,b.tZ)(l.gN,{name:`${e}.name`,subscription:{value:!0},render:({input:e})=>(0,b.tZ)(d.Z,{...e,label:C("Name"),fullWidth:!0,color:"secondary",disabled:null==f?void 0:f.disabled,variant:"standard",onChange:k(e.onChange),error:Boolean(x[(0,Z.H)(e.name)]),helperText:x[(0,Z.H)(e.name)]})})}),(0,b.tZ)(c.Z,{children:(0,b.tZ)(l.gN,{name:`${e}.weight`,subscription:{value:!0},render:({input:e})=>(0,b.tZ)(v,{...e,mask:"#########",definitions:{"#":/[0-9]/},fullWidth:!0,color:"secondary",disabled:null==f?void 0:f.disabled,variant:"standard",InputProps:{endAdornment:(0,b.tZ)(u.Z,{position:"start",children:"gr"})},onChange:k(e.onChange),error:Boolean(x[(0,Z.H)(e.name)]),helperText:x[(0,Z.H)(e.name)]})})}),(0,b.tZ)(c.Z,{align:"center",children:(()=>{const e=i().get(y.getState(),`values.preparations[${null==f?void 0:f.index}]`,{}),t=e.ingredients[n],r=t.weight&&t.weight.length?parseInt(t.weight,10):0;let a=0;return e.ingredients.forEach((e=>{const{weight:n}=e;n&&n.length&&(a+=parseInt(e.weight,10))})),r||a?`${(r/a*100).toFixed(2)}%`:"0%"})()}),(0,b.tZ)(c.Z,{children:(0,b.tZ)(p.Z,{size:"small",onClick:t,children:(0,b.tZ)(h.Z,{})})})]})}},1194:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var r=t(7294),a=t(6486),i=t.n(a),o=t(4587),l=t(5944);function s({onChange:e,...n}){const t=(0,r.useRef)(null),a=i().defaults({init:{skin:"oxide-dark",content_css:"dark",height:300,plugins:"mentions autolink charmap emoticons image link lists textcolor searchreplace table visualblocks wordcount checklist mediaembed casechange formatpainter permanentpen advtable fullscreen editimage tableofcontents powerpaste tinymcespellchecker autocorrect a11ychecker typography inlinecss",toolbar:"bold italic underline strikethrough forecolor backcolor align checklist numlist bullist | lineheight indent outdent | link image table emoticons charmap | blocks removeformat fontsize fontfamily undo redo",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}]}},n);return(0,l.tZ)(o.M,{...a,tinymceScriptSrc:"/storage/tinymce/tinymce.min.js",apiKey:"kq5c8fvux789ubm44jr6wwl35i96kzrjci9syeigklsy74rt",ref:t,onChange:()=>{t.current&&t.current.editor&&e({target:{name:n.textareaName||"",value:t.current.editor.getContent()}})}})}},2280:(e,n,t)=>{t.r(n),t.d(n,{CTX_PREPARATION:()=>$,default:()=>I});var r=t(4316),a=(t(3948),t(7658),t(7294)),i=t(6486),o=t.n(i),l=t(9887),s=t(6688),c=t(4589),d=t(4659),u=t(6867),p=t(7896),h=t(9573),m=t(6011),g=t(3694),Z=t(6926),f=t(8732),b=t(6914),v=t(6446),C=t(476),y=t(3460),x=t(6235),k=t(3343),B=t(1273),X=t(1194),N=t(9970),w=t(8199),P=t(8872),S=t(5944);const $=a.createContext(null);function I(e){const{name:n,disabled:t,onDelete:r,index:i,...I}=e,{t:D}=(0,l.$G)(),[H,R]=(0,w.pN)(),{values:W}=(0,a.useContext)(P.CTX);return(0,S.tZ)($.Provider,{value:e,children:(0,S.BX)(T,{...I,children:[(0,S.BX)(A,{children:[(0,S.tZ)(s.gN,{name:`${n}.name`,subscription:{value:!0},render:({input:e})=>(0,S.tZ)(d.Z,{...e,label:D("Preparation name"),fullWidth:!0,color:"secondary",disabled:t,variant:"standard",onChange:R(e.onChange),error:Boolean(H[(0,N.H)(e.name)]),helperText:H[(0,N.H)(e.name)]})}),(0,S.tZ)(u.Z,{onClick:r,children:(0,S.tZ)(k.Z,{})})]}),(0,S.tZ)(p.Z,{children:(0,S.BX)(h.Z,{children:[(0,S.tZ)(m.Z,{children:(0,S.BX)(g.Z,{children:[(0,S.BX)(Z.Z,{children:[D("Ingredients"),":"]}),(0,S.BX)(Z.Z,{children:[D("Weight"),":"]}),(0,S.BX)(Z.Z,{children:[D("Percentage"),":"]}),(0,S.tZ)(Z.Z,{})]})}),(0,S.tZ)(f.Z,{children:(0,S.tZ)(c.F2,{name:`${n}.ingredients`,subscription:{value:!0},render:({fields:e})=>{let t=0,r=0;return e.value.forEach((e=>{const n=parseInt(e.weight,10);isNaN(n)||(t+=n)})),e.value.forEach((e=>{const n=parseInt(e.weight,10);isNaN(n)||(r+=n/t*100)})),(0,S.BX)(S.HY,{children:[e.map(((n,t)=>(0,S.tZ)(B.default,{name:n,index:t,onDelete:()=>{e.length&&e.length>1&&e.remove(t)}},n))),(0,S.BX)(g.Z,{children:[(0,S.BX)(Z.Z,{children:[D("Total"),":"]}),(0,S.BX)(Z.Z,{align:"center",children:[t," gr"]}),(0,S.BX)(Z.Z,{align:"center",children:[r.toFixed(2),"%"]}),(0,S.tZ)(Z.Z,{})]}),(0,S.tZ)(g.Z,{children:(0,S.tZ)(Z.Z,{colSpan:4,align:"center",valign:"middle",children:(0,S.tZ)(b.Z,{variant:"text",size:"small",color:"secondary",startIcon:(0,S.tZ)(x.Z,{}),onClick:()=>e.push({name:"",weight:""}),children:D("Add Ingredient")})})}),(0,S.tZ)(g.Z,{children:(0,S.tZ)(Z.Z,{colSpan:4,children:(0,S.tZ)(s.gN,{name:`${n}.instructions`,subscription:{value:!0},render:({input:e})=>(0,S.BX)(v.Z,{fullWidth:!0,error:Boolean(H[(0,N.H)(e.name)]),children:[(0,S.BX)(C.Z,{sx:{mb:1},children:[D("Instructions"),":"]}),(0,S.tZ)(X.default,{initialValue:o().get(W,`preparations[${i}].instructions`,""),textareaName:e.name,onChange:R(e.onChange)}),Boolean(H[(0,N.H)(e.name)])&&(0,S.tZ)(y.Z,{error:!0,color:"error",children:H[(0,N.H)(e.name)]})]})})})})]})}})})]})})]})})}const T=(0,r.Z)("div",{target:"e1rig4x61"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),A=(0,r.Z)("div",{target:"e1rig4x60"})({name:"zjik7",styles:"display:flex"})},6838:(e,n,t)=>{t.r(n),t.d(n,{default:()=>l});var r=t(7294),a=t(6486),i=t.n(a),o=t(3999);function l(e){return(0,r.useCallback)((n=>{const t=new FormData;function r(e,n){Array.isArray(e)||"object"==typeof e?i().forEach(e,((e,a)=>{const i=`${n}[${a}]`;Array.isArray(e)||"object"==typeof e?r(e,i):t.append(i,e)})):t.append(n,e)}i().forEach(n,((e,n)=>{if("string"==typeof e){const e=document.getElementsByName(n)[0];if(e&&e.files){if(e.hasAttribute("multiple"))for(let r=0;r<e.files.length;r++)t.append(`${n}[]`,e.files[r]);else t.append(n,e.files[0]);return}}r(e,n)})),o.Nd.post(e,t,{forceFormData:!0,onBefore:()=>o.Nd.remember(n)})}),[e])}},8872:(e,n,t)=>{t.r(n),t.d(n,{CTX:()=>F,default:()=>O});var r=t(4316),a=(t(3948),t(7658),t(7294)),i=t(6486),o=t.n(i),l=t(3999),s=t(9887),c=t(3342),d=t(6688),u=t(4589),p=t(5725),h=t(4659),m=t(270),g=t(6446),Z=t(7665),f=t(3460),b=t(6867),v=t(476),C=t(542),y=t(2887),x=t(6914),k=t(6895),B=t(1985),X=t(6540),N=t(8199),w=t(8045),P=t(2280),S=t(1194),$=t(2829),I=t(585),T=t(4347),A=t(5944);function D({options:e,helperText:n="",...t}){const{t:r}=(0,s.$G)(),a=Boolean(n);return(0,A.BX)(A.HY,{children:[(0,A.tZ)(I.Z,{...t,multiple:!0,renderValue:n=>{const t=n;if(0===t.length)return(0,A.tZ)("em",{});const r=[];return t.forEach((n=>{r.push(e[n])})),(0,A.tZ)("em",{children:r.join(",")})},children:o().map(e,((e,n)=>(0,A.BX)(T.Z,{value:n,children:[(0,A.tZ)(y.Z,{checked:t.value.indexOf(n)>-1,color:t.color}),r(e)]},`option-${n}`)))}),t.error&&a&&(0,A.tZ)(f.Z,{children:n})]})}var H=t(7228),R=t(4069);function W({InputProps:e,prefix:n="$",...t}){const r=o().defaultTo(e,{}),a=o().defaultTo(r.inputProps,{});return(0,A.tZ)(h.Z,{...t,InputProps:{...r,inputComponent:E,inputProps:{...a,prefix:n}}})}const E=a.forwardRef(((e,n)=>{const{prefix:t,onChange:r,...a}=e;return(0,A.tZ)(R.h3,{...a,getInputRef:n,onValueChange:n=>{r({target:{name:e.name,value:n.value}})},thousandSeparator:!0,valueIsNumericString:!0,prefix:t})}));var j=t(6838);const z={categories:[],preparations:[{name:"",ingredients:[{name:"",weight:""}],instructions:""}]},F=a.createContext({categoriesDialogOpen:!1,setCategoriesDialogOpen:()=>{},values:z});function O({action:e,values:n=z}){const{t}=(0,s.$G)(),r=l.Nd.restore(),[i,u]=(0,a.useState)(!1),p=(0,a.useMemo)((()=>({categoriesDialogOpen:i,setCategoriesDialogOpen:u,values:n})),[i]),h=(0,j.default)(e);return(0,A.BX)(F.Provider,{value:p,children:[(0,A.tZ)(w.Z,{children:(0,A.tZ)(w.$,{title:t("Recipe"),children:(0,A.tZ)(d.l0,{initialValues:o().defaults(r,n,{cover:""}),mutators:{...c.Z},subscription:{submitting:!0,pristine:!0},onSubmit:h,render:({submitting:e,handleSubmit:t})=>{const r=e;return(0,A.BX)(_,{id:"piwi",onSubmit:t,children:[(0,A.tZ)(G,{values:n,processing:r}),(0,A.tZ)(d.lP,{onChange:e=>{l.Nd.remember(e.values)}})]})}})})}),(0,A.tZ)(H.default,{})]})}const G=a.memo((({values:e,processing:n})=>{const{t}=(0,s.$G)(),r=(0,l.qt)().props.categories,i=(()=>{const e={};return r.forEach((n=>{e[n.id]=n.label})),e})(),{setCategoriesDialogOpen:o}=(0,a.useContext)(F),[c,w]=(0,N.pN)(),[I,T]=(0,a.useState)(e.preparations.length>1),H=(0,a.useCallback)((()=>o(!0)),[]);return(0,A.BX)(A.HY,{children:[(0,A.BX)(p.ZP,{container:!0,spacing:2,children:[(0,A.tZ)(p.ZP,{item:!0,xs:12,md:3,container:!0,alignItems:"center",justifyContent:"center",children:(0,A.tZ)($.default,{initial:e.cover?`/storage/uploads/${e.cover}`:e.cover})}),(0,A.BX)(p.ZP,{item:!0,xs:12,md:9,children:[(0,A.BX)(p.ZP,{container:!0,spacing:2,children:[(0,A.tZ)(p.ZP,{item:!0,xs:12,md:6,children:(0,A.tZ)(d.gN,{name:"name",subscription:{value:!0},render:({input:e})=>(0,A.tZ)(h.Z,{...e,label:t("Name"),fullWidth:!0,sx:{mb:2},color:"secondary",variant:"standard",disabled:n,InputProps:{startAdornment:(0,A.tZ)(m.Z,{position:"start",children:(0,A.tZ)(B.Z,{})})},onChange:w(e.onChange),error:Boolean(c[e.name]),helperText:c[e.name]})})}),(0,A.BX)(p.ZP,{item:!0,xs:12,md:6,container:!0,children:[(0,A.tZ)(p.ZP,{item:!0,flex:1,children:(0,A.tZ)(d.gN,{name:"categories",subscription:{value:!0},render:({input:e})=>(0,A.BX)(g.Z,{fullWidth:!0,color:"secondary",disabled:n,variant:"standard",error:Boolean(c[e.name]),children:[(0,A.tZ)(Z.Z,{children:t("Categories")}),(0,A.tZ)(D,{...e,onChange:w(e.onChange),color:"secondary",options:i,error:Boolean(c[e.name])}),Boolean(c[e.name])&&(0,A.tZ)(f.Z,{error:!0,color:"error",children:c[e.name]})]})})}),(0,A.tZ)(p.ZP,{item:!0,sx:{pt:1},children:(0,A.tZ)(b.Z,{onClick:H,children:(0,A.tZ)(X.Z,{})})})]})]}),I&&(0,A.tZ)(d.gN,{name:"setup",subscription:{value:!0},render:({input:n})=>(0,A.BX)(g.Z,{fullWidth:!0,error:Boolean(c[n.name]),children:[(0,A.BX)(v.Z,{sx:{mb:1},children:[t("Set up"),":"]}),(0,A.tZ)(S.default,{initialValue:e.setup,textareaName:n.name,onChange:w(n.onChange)}),Boolean(c[n.name])&&(0,A.tZ)(f.Z,{error:!0,color:"error",children:c[n.name]})]})})]})]}),(0,A.tZ)(V,{children:(0,A.tZ)(u.F2,{name:"preparations",subscription:{value:!0},render:({fields:e})=>(0,A.BX)(A.HY,{children:[e.map(((t,r)=>(0,A.tZ)(P.default,{name:t,index:r,onDelete:()=>{e.length&&e.length>1&&(e.length-1<=1&&T(!1),e.remove(r))},disabled:n},t))),(0,A.tZ)(Y,{label:t("Add preparation"),onClick:()=>{T(!0),e.push({name:"",ingredients:[{name:"",weight:""}]})}})]})})}),(0,A.BX)(q,{children:[(0,A.tZ)(d.gN,{name:"is_premium",subscription:{value:!0},render:({input:e})=>(0,A.BX)(A.HY,{children:[(0,A.tZ)(C.Z,{label:t("Premium"),control:(0,A.tZ)(y.Z,{color:"secondary",onChange:e.onChange,checked:e.value})}),e.value?(0,A.tZ)(d.gN,{name:"cost",subscription:{value:!0},render:e=>(0,A.tZ)(W,{...e.input,label:t("Cost"),variant:"standard",sx:{mr:1},color:"secondary",disabled:n,onChange:w(e.input.onChange),error:Boolean(c[e.input.name]),helperText:c[e.input.name]})}):null]})}),(0,A.tZ)(x.Z,{type:"submit",variant:"contained",color:"secondary",startIcon:(0,A.tZ)(k.Z,{}),disabled:n,children:t("Process")})]})]})}),o().isEqual),_=(0,r.Z)("form",{target:"e1wfskri3"})((({theme:e})=>({padding:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"flex-end"})),""),V=(0,r.Z)("div",{target:"e1wfskri2"})((({theme:e})=>({display:"grid",gridTemplateRows:"auto",gridTemplateColumns:"repeat(2, 1fr)",marginTop:e.spacing(2),gap:e.spacing(1),"& .MuiTableContainer-root":{border:`1px solid ${e.palette.divider}`,"& td":{verticalAlign:"bottom"}}})),""),Y=(0,r.Z)("div",{target:"e1wfskri1"})((({theme:e,label:n})=>({width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:e.palette.grey[500],borderColor:e.palette.divider,borderStyle:"dotted",cursor:"pointer",":hover":{borderColor:e.palette.secondary.main,color:e.palette.secondary.main},":before":{display:"block",content:'"âœ™"',fontSize:50},":after":{display:"block",content:`"${n}"`,fontSize:16,fontWeight:"bold"}})),""),q=(0,r.Z)("div",{target:"e1wfskri0"})((({theme:e})=>({marginLeft:e.spacing(2),marginTop:e.spacing(3),display:"flex",alignItems:"flex-end",color:"white"})),"")}}]);